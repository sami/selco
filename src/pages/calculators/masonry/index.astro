---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import MasonryCalculator from '../../../components/MasonryCalculator';

const base = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;

const faqs = [
  {
    question: 'How many bricks do I need per square metre?',
    answer: 'A half-brick wall uses approximately 60 bricks per m². A one-brick (215 mm) wall uses 120 per m². These figures include a 10 mm mortar joint.',
  },
  {
    question: 'How many blocks per square metre?',
    answer: 'Standard 440 × 215 mm blocks work out to roughly 10 blocks per m², regardless of whether you use 100 mm or 140 mm thick blocks.',
  },
  {
    question: 'What mortar mix ratio should I use?',
    answer: 'For general-purpose brickwork above DPC, use 1:4 (cement to sand). Use 1:3 for exposed or structural work below DPC. Use 1:5 or 1:6 for lightweight blockwork partitions.',
  },
  {
    question: 'Do I need wall ties for a cavity wall?',
    answer: 'Yes. Building Regulations require wall ties at a minimum rate of 2.5 per m², with additional ties around openings at 300 mm centres. Our calculator includes both.',
  },
  {
    question: 'How much extra should I order for waste?',
    answer: 'Allow 5% waste for bricks and blocks to cover breakages and cutting. Allow 10% for mortar to cover spillage and pointing. These are the calculator defaults.',
  },
];

const site = 'https://sami.github.io/selco/';

const breadcrumbJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    { '@type': 'ListItem', position: 1, name: 'Home', item: site },
    { '@type': 'ListItem', position: 2, name: 'Calculators', item: `${site}calculators/` },
    { '@type': 'ListItem', position: 3, name: 'Masonry', item: `${site}calculators/masonry/` },
  ],
};

const faqJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: faqs.map((faq) => ({
    '@type': 'Question',
    name: faq.question,
    acceptedAnswer: {
      '@type': 'Answer',
      text: faq.answer,
    },
  })),
};

const relatedCalculators = [
  { title: 'Tiles', href: `${base}calculators/tiles/`, description: 'Calculate tile quantities for floors and walls.' },
  { title: 'Adhesive', href: `${base}calculators/adhesive/`, description: 'Work out how much tile adhesive to buy.' },
  { title: 'Grout', href: `${base}calculators/grout/`, description: 'Estimate grout quantity by joint size.' },
  { title: 'Unit Conversions', href: `${base}calculators/conversions/`, description: 'Convert between metric and imperial units.' },
];
---

<BaseLayout
  title="Masonry Calculator | How Many Bricks and Blocks Do I Need?"
  description="Free masonry calculator. Calculate bricks, blocks, mortar, wall ties, lintels, and DPC for half-brick, one-brick, cavity, and blockwork walls."
>
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbJsonLd)} />
  <script type="application/ld+json" set:html={JSON.stringify(faqJsonLd)} />

  <div class="container mx-auto px-4 pt-6 md:pt-10 pb-16">

    <!-- Breadcrumbs -->
    <nav aria-label="Breadcrumb" class="mb-6 text-sm text-muted-foreground">
      <ol class="flex items-center gap-1.5 flex-wrap">
        <li><a href={base} class="hover:text-brand-blue transition-colors">Home</a></li>
        <li class="text-border">/</li>
        <li><a href={`${base}calculators/`} class="hover:text-brand-blue transition-colors">Calculators</a></li>
        <li class="text-border">/</li>
        <li class="text-surface-foreground font-medium">Masonry</li>
      </ol>
    </nav>

    <!-- H1 & Intro -->
    <header class="mb-8 max-w-3xl">
      <h1 class="text-3xl md:text-4xl font-bold text-surface-foreground mb-4">
        Masonry Calculator: Work Out How Many Bricks and Blocks You Need
      </h1>
      <p class="text-lg text-muted-foreground leading-relaxed">
        Enter your wall dimensions, choose a wall type, and get an instant estimate of bricks, blocks, mortar, wall ties, and lintels. The calculator covers half-brick, one-brick, cavity, and blockwork partition walls.
      </p>
    </header>

    <!-- Disclaimer -->
    <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-10 text-sm text-amber-800">
      <p>These calculations are estimates only. Actual quantities depend on site conditions, cutting accuracy, mortar joint consistency, and brick/block dimensions. Always confirm requirements with your supplier before ordering.</p>
    </div>

    <!-- Guidance Section -->
    <section class="mb-12 max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">How to Calculate Masonry Materials</h2>
      <div class="space-y-6">
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">How many bricks per m²?</h3>
          <p class="text-muted-foreground leading-relaxed">A standard UK brick is 215 × 102.5 × 65 mm. With a 10 mm mortar joint, a half-brick (single skin) wall uses 60 bricks per m². A one-brick wall (215 mm thick) uses 120 per m². Cavity walls use 60 bricks per m² on the outer leaf.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">How many blocks per m²?</h3>
          <p class="text-muted-foreground leading-relaxed">A standard concrete block is 440 × 215 mm. With 10 mm joints, you need 10 blocks per m² of wall face. This applies to both 100 mm and 140 mm thick blocks.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Mortar mix ratios</h3>
          <!-- Waste allowance table style -->
          <div class="bg-white rounded-xl border border-border overflow-hidden">
            <table class="w-full text-sm">
              <thead>
                <tr class="bg-muted/30 text-left text-muted-foreground">
                  <th scope="col" class="px-4 py-3 font-medium">Mix Ratio</th>
                  <th scope="col" class="px-4 py-3 font-medium">Use</th>
                  <th scope="col" class="px-4 py-3 font-medium">Cement (25 kg bags/m³)</th>
                </tr>
              </thead>
              <tbody class="text-surface-foreground">
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">1:3</td><td class="px-4 py-2.5">Below DPC, retaining walls</td><td class="px-4 py-2.5">~15 bags</td></tr>
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">1:4</td><td class="px-4 py-2.5">General purpose above DPC</td><td class="px-4 py-2.5">~12 bags</td></tr>
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">1:5</td><td class="px-4 py-2.5">Internal blockwork</td><td class="px-4 py-2.5">~9 bags</td></tr>
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">1:6</td><td class="px-4 py-2.5">Lightweight block partitions</td><td class="px-4 py-2.5">~8 bags</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Wall types explained</h3>
          <p class="text-muted-foreground leading-relaxed">
            <strong>Half-brick:</strong> Single skin of bricks (102.5mm thick). Used for garden walls or non-structural partitions.<br>
            <strong>One-brick:</strong> Double skin of bricks (215mm thick), bonded together. Structural and load-bearing.<br>
            <strong>Cavity:</strong> Two skins (usually brick outer, block inner) with a gap for insulation. Standard for external house walls.<br>
            <strong>Blockwork:</strong> Single skin of concrete blocks (100mm or 140mm). Used for internal load-bearing walls and partitions, faster to build.
          </p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Common mistakes</h3>
          <p class="text-muted-foreground leading-relaxed">Under-ordering bricks (always add 5%), not accounting for mortar waste, forgetting wall ties in cavity walls, and omitting lintel bearings when measuring for steel.</p>
        </div>
      </div>
    </section>

    <!-- React Island -->
    <section class="mb-12" id="calculator">
      <MasonryCalculator client:load />
    </section>

    <!-- Tips Section -->
    <section class="mb-12 max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">Masonry Tips</h2>
      <div class="space-y-6">
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Ordering bricks</h3>
          <p class="text-muted-foreground leading-relaxed">Order all bricks from the same batch to avoid colour variation. Check with your supplier about lead times — handmade and specialist bricks can take weeks.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Mixing mortar</h3>
          <p class="text-muted-foreground leading-relaxed">Mix mortar in small batches to prevent it setting before use. In hot weather, dampen bricks before laying to stop them drawing moisture from the mortar too quickly.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Waste and returns</h3>
          <p class="text-muted-foreground leading-relaxed">Most builders' merchants won't accept returns on cut blocks or opened cement bags. Calculate carefully and keep packaging intact where possible.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Wall ties</h3>
          <p class="text-muted-foreground leading-relaxed">Use stainless steel wall ties for cavity walls. Space them at 900 mm horizontally and 450 mm vertically, with extra ties at 300 mm centres around all openings.</p>
        </div>
      </div>
    </section>

    <!-- Related Calculators -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">Related Calculators</h2>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
        {relatedCalculators.map((calc) => (
          <a
            href={calc.href}
            class="block bg-white rounded-xl border border-border p-5 hover:border-brand-blue hover:shadow-md transition-all group focus-ring"
          >
            <h3 class="font-semibold text-surface-foreground group-hover:text-brand-blue transition-colors mb-1">{calc.title}</h3>
            <p class="text-sm text-muted-foreground">{calc.description}</p>
          </a>
        ))}
      </div>
    </section>

    <!-- FAQ -->
    <section class="mb-12 max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">Frequently Asked Questions</h2>
      <div class="space-y-3">
        {faqs.map((faq) => (
          <details class="group bg-white rounded-xl border border-border overflow-hidden">
            <summary class="flex items-center justify-between px-5 py-4 cursor-pointer text-surface-foreground font-medium hover:bg-muted/30 transition-colors focus-ring">
              {faq.question}
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 ml-4 text-muted-foreground transition-transform group-open:rotate-180">
                <path d="m6 9 6 6 6-6" />
              </svg>
            </summary>
            <div class="px-5 pb-4 text-sm text-muted-foreground leading-relaxed border-t border-border/50 pt-3">
              {faq.answer}
            </div>
          </details>
        ))}
      </div>
    </section>

    <!-- Sources -->
    <section class="max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-4">Sources &amp; Further Reading</h2>
      <p class="text-muted-foreground text-sm mb-3">Brick and block rates are based on standard UK unit sizes with 10 mm mortar joints. Mortar volumes follow PD 6697 guidance.</p>
      <ul class="list-disc list-inside text-sm text-muted-foreground space-y-1">
        <li>BS EN 771-1 — Specification for masonry units: clay bricks</li>
        <li>PD 6697 — Recommendations for the design of masonry structures (mortar mix design)</li>
        <li>Approved Document A (Structure) — Building Regulations guidance on wall construction and wall ties</li>
      </ul>
    </section>

  </div>
</BaseLayout>
