---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import TileCalculator from '../../../components/TileCalculator';

const base = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;

const faqs = [
  {
    question: 'How many tiles do I need per square metre?',
    answer: 'It depends on tile size. For 300 x 300 mm tiles, you need roughly 11 per m². For 600 x 300 mm, about 6 per m². For 600 x 600 mm, about 3 per m².',
  },
  {
    question: 'Should I add waste when ordering tiles?',
    answer: 'Yes. Always add a waste allowance. Use 10% for straight layouts and up to 15% for diagonal or herringbone patterns.',
  },
  {
    question: 'What if my room is not a simple rectangle?',
    answer: 'Break the room into rectangular sections, calculate each area separately, and add them together. Enter the total area into the calculator.',
  },
  {
    question: 'Do I need different tiles for walls and floors?',
    answer: 'Floor tiles must be rated for floor use — they are thicker and more durable. Wall tiles are thinner and lighter. Check the product specification before buying.',
  },
  {
    question: 'How do I account for doors and windows?',
    answer: 'Measure the area of each opening and subtract it from your total wall area. For small openings like windows, some tilers skip the deduction and use the extra tiles as spares.',
  },
];

const site = 'https://sami.github.io/selco/';

const breadcrumbJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    { '@type': 'ListItem', position: 1, name: 'Home', item: site },
    { '@type': 'ListItem', position: 2, name: 'Calculators', item: `${site}calculators/` },
    { '@type': 'ListItem', position: 3, name: 'Tiles', item: `${site}calculators/tiles/` },
  ],
};

const faqJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: faqs.map((faq) => ({
    '@type': 'Question',
    name: faq.question,
    acceptedAnswer: {
      '@type': 'Answer',
      text: faq.answer,
    },
  })),
};

const relatedCalculators = [
  { title: 'Adhesive', href: `${base}calculators/adhesive/`, description: 'Work out how much tile adhesive to buy.' },
  { title: 'Grout', href: `${base}calculators/grout/`, description: 'Estimate grout quantity by joint size.' },
  { title: 'Spacers', href: `${base}calculators/spacers/`, description: 'Count spacers and packs for your layout.' },
  { title: 'Unit Conversions', href: `${base}calculators/conversions/`, description: 'Convert between metric and imperial units.' },
];
---

<BaseLayout
  title="Tile Calculator | How Many Tiles Do I Need?"
  description="Free tile calculator. Calculate how many tiles you need for your wall or floor. Enter your room dimensions and tile size to get an instant estimate including wastage."
>
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbJsonLd)} />
  <script type="application/ld+json" set:html={JSON.stringify(faqJsonLd)} />

  <div class="container mx-auto px-4 pt-6 md:pt-10 pb-16">

    <!-- Breadcrumbs -->
    <nav aria-label="Breadcrumb" class="mb-6 text-sm text-muted-foreground">
      <ol class="flex items-center gap-1.5 flex-wrap">
        <li><a href={base} class="hover:text-brand-blue transition-colors">Home</a></li>
        <li class="text-border">/</li>
        <li><a href={`${base}calculators/`} class="hover:text-brand-blue transition-colors">Calculators</a></li>
        <li class="text-border">/</li>
        <li class="text-surface-foreground font-medium">Tile Quantity</li>
      </ol>
    </nav>

    <!-- H1 & Intro -->
    <header class="mb-8 max-w-3xl">
      <h1 class="text-3xl md:text-4xl font-bold text-surface-foreground mb-4">
        Tile Calculator: Work Out How Many Tiles You Need
      </h1>
      <p class="text-lg text-muted-foreground leading-relaxed">
        Enter your room dimensions and tile size to calculate the number of tiles you need for any floor or wall. The calculator adds a waste allowance based on your chosen lay pattern so you order enough first time.
      </p>
    </header>

    <!-- Disclaimer -->
    <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-10 text-sm text-amber-800 flex gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 mt-0.5 text-amber-600">
        <path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
        <line x1="12" x2="12" y1="9" y2="13" />
        <line x1="12" x2="12.01" y1="17" y2="17" />
      </svg>
      <p>These calculations are estimates only. Actual quantities depend on site conditions, tile breakage, cutting accuracy and substrate type. Always confirm requirements with the manufacturer before ordering.</p>
    </div>

    <!-- Guidance Section -->
    <section class="mb-12 max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">How to Calculate Tiles</h2>
      <div class="space-y-6">
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Measure Your Area</h3>
          <p class="text-muted-foreground leading-relaxed">Measure the length and width of the surface you plan to tile, in metres. For walls, measure the height and width of each section separately. Multiply length by width to get the area in square metres. For example, a 3 m × 4 m floor is 12 m².</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Choose Your Tile Size</h3>
          <p class="text-muted-foreground leading-relaxed">Common UK tile sizes include 300 × 300 mm (standard floor), 600 × 300 mm (rectangular floor), 200 × 100 mm (metro wall) and 600 × 600 mm (large format). Larger tiles cover more area per piece but may need more cuts around edges.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Understand Waste Allowance</h3>
          <p class="text-muted-foreground leading-relaxed mb-4">Every tiling job produces waste from cuts, breakages and pattern alignment. Add at least 10% for a straight grid layout. Brick bond (offset) patterns need around 12%. Diagonal and herringbone layouts need 15% because of the extra angled cuts at every edge.</p>

          <!-- Waste allowance table -->
          <div class="bg-white rounded-xl border border-border overflow-hidden">
            <table class="w-full text-sm">
              <thead>
                <tr class="bg-muted/30 text-left text-muted-foreground">
                  <th scope="col" class="px-4 py-3 font-medium">Lay Pattern</th>
                  <th scope="col" class="px-4 py-3 font-medium">Waste Allowance</th>
                  <th scope="col" class="px-4 py-3 font-medium">Best For</th>
                </tr>
              </thead>
              <tbody class="text-surface-foreground">
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">Straight (grid)</td><td class="px-4 py-2.5">10%</td><td class="px-4 py-2.5">Simple rooms, beginners</td></tr>
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">Brick bond (offset)</td><td class="px-4 py-2.5">12%</td><td class="px-4 py-2.5">Rectangular tiles, kitchens</td></tr>
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">Diagonal (diamond)</td><td class="px-4 py-2.5">15%</td><td class="px-4 py-2.5">Small rooms (creates sense of space)</td></tr>
                <tr class="border-t border-border/50"><td class="px-4 py-2.5">Herringbone</td><td class="px-4 py-2.5">15%</td><td class="px-4 py-2.5">Feature floors, hallways</td></tr>
              </tbody>
            </table>
          </div>

          <p class="text-muted-foreground text-sm mt-4">Need adhesive, grout and spacers too? Use our <a href={`${base}calculators/adhesive/`} class="text-brand-blue hover:underline">adhesive</a>, <a href={`${base}calculators/grout/`} class="text-brand-blue hover:underline">grout</a> and <a href={`${base}calculators/spacers/`} class="text-brand-blue hover:underline">spacers</a> calculators to estimate every material.</p>
        </div>
      </div>
    </section>

    <!-- React Island -->
    <section class="mb-12" id="calculator">
      <TileCalculator client:load />
    </section>

    <!-- Tips Section -->
    <section class="mb-12 max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">Tiling Tips</h2>
      <div class="space-y-6">
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Measure Twice, Buy Once</h3>
          <p class="text-muted-foreground leading-relaxed">Always double-check your room measurements before ordering. Small errors add up across large areas.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Buy Extra Tiles</h3>
          <p class="text-muted-foreground leading-relaxed">Order 10 to 15% more tiles than the calculator suggests. Tiles from different production batches often have slight colour variations. Keeping spares from the same batch helps with future repairs.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Check Your Surface</h3>
          <p class="text-muted-foreground leading-relaxed">Tiling onto an uneven surface causes problems. Use a spirit level and straight edge to check for dips. Fill low spots with self-levelling compound before starting.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-surface-foreground mb-2">Choose the Right Adhesive</h3>
          <p class="text-muted-foreground leading-relaxed">Use flexible adhesive for underfloor heating or wooden subfloors. Use rapid-set adhesive when you need to grout the same day. See our <a href={`${base}calculators/adhesive/`} class="text-brand-blue hover:underline">adhesive calculator</a> for quantities.</p>
        </div>
      </div>
    </section>

    <!-- Related Calculators -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">Related Calculators</h2>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
        {relatedCalculators.map((calc) => (
          <a
            href={calc.href}
            class="block bg-white rounded-xl border border-border p-5 hover:border-brand-blue hover:shadow-md transition-all group focus-ring"
          >
            <h3 class="font-semibold text-surface-foreground group-hover:text-brand-blue transition-colors mb-1">{calc.title}</h3>
            <p class="text-sm text-muted-foreground">{calc.description}</p>
          </a>
        ))}
      </div>
    </section>

    <!-- FAQ -->
    <section class="mb-12 max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-6">Frequently Asked Questions</h2>
      <div class="space-y-3">
        {faqs.map((faq) => (
          <details class="group bg-white rounded-xl border border-border overflow-hidden">
            <summary class="flex items-center justify-between px-5 py-4 cursor-pointer text-surface-foreground font-medium hover:bg-muted/30 transition-colors focus-ring">
              {faq.question}
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 ml-4 text-muted-foreground transition-transform group-open:rotate-180">
                <path d="m6 9 6 6 6-6" />
              </svg>
            </summary>
            <div class="px-5 pb-4 text-sm text-muted-foreground leading-relaxed border-t border-border/50 pt-3">
              {faq.answer}
            </div>
          </details>
        ))}
      </div>
    </section>

    <!-- Sources -->
    <section class="max-w-3xl">
      <h2 class="text-2xl font-bold text-surface-foreground mb-4">Sources &amp; Further Reading</h2>
      <p class="text-muted-foreground text-sm mb-3">Waste percentages are based on industry guidance for UK tiling patterns. Tile sizes reference common UK product ranges.</p>
      <ul class="list-disc list-inside text-sm text-muted-foreground space-y-1">
        <li><a href="https://www.britishceramictile.com" target="_blank" rel="noopener noreferrer" class="text-brand-blue hover:underline">British Ceramic Tile</a> — Tile size guide (standard UK tile dimensions and coverage)</li>
        <li><a href="https://www.tiles.org.uk" target="_blank" rel="noopener noreferrer" class="text-brand-blue hover:underline">TTA / Tile Association</a> — Tiling best practice and BS 5385 guidance on laying patterns and waste</li>

      </ul>
    </section>

  </div>
</BaseLayout>
